# vue 与 react 区别

## react fiber 原理及 vue 为什么不使用

当数据修改了，触发视图的更新：

`react` 中，调用 `setState` 方法后，会自顶向下重新渲染组件，自顶向下的含义是，该组件以及它的子组件全部需要渲染；

而 `vue` 使用 `Object.defineProperty/Proxy` 对数据的设置 `setter` 和获取 `getter` 做了劫持（数据依赖收集）。也就是说，`vue` 能准确知道那些相关组件需要更新。

所以当一个数据改变，`react` 的组件渲染是很消耗性能的——父组件的状态更新了，所有的子组件得跟着一起渲染，它不能像 `vue` 一样，精确到当前组件的粒度。

所以，为什么需要`react fiber`：

在数据更新时，`react` 生成了一棵更大的虚拟 `dom` 树，给第二步的 `diff` 带来了很大压力——我们想找到真正变化的部分，这需要花费更长的时间。`js` 占据主线程去做比较，渲染线程便无法做其他工作，用户的交互得不到响应，所以便出现了`react fiber`。

`react fiber` 没法让比较的时间缩短，但它使得 `diff` 的过程被分成一小段一小段的，因为它有了“保存工作进度”的能力。`js` 会比较一部分虚拟 `dom`，然后让渡主线程，给浏览器去做其他工作，然后继续比较，依次往复，等到最后比较完成，一次性更新到视图上。

参考链接：[阿里三面：灵魂拷问——有react fiber，为什么不需要vue fiber呢？](https://juejin.cn/post/7077545184807878692)